library(lssSimulate)
seed = 123124
outFileName = "./sim1.txt"
simResults = generateMultiLocData(135151)
set.seed(seed)
DataModel = buildDataModel(simResults$I_star, type = "overdispersion", params = c(500,100))
priorBetaIntercept = log(mean(-log(1-(simResults$I_star/(simResults$N)))))
ExposureModel = buildExposureModel(simResults$X, simResults$Z,
beta = c(priorBetaIntercept, rep(0, ((length(simResults$beta_SE))-1))), betaPriorPrecision = 1,
nTpt=nrow(simResults$I_star))
ReinfectionModel = buildReinfectionModel("SEIR")
SamplingControl = buildSamplingControl(iterationStride=1000,
sliceWidths = c(0.26,  # S_star
0.1,  # E_star
0.15, # I_star
0.22, # S0
0.24, # I0
0.8, # beta
0.2, # betaPrs
0.015, # rho
0.01, # gamma_ei
0.01, # gamma_ir
0.01 # phi
))
DistanceModel = buildDistanceModel(list(matrix(0)))
TransitionPriors = buildTransitionPriorsFromProbabilities(1-exp(-simResults$gamma_ei),
1-exp(-simResults$gamma_ir), simResults$effectiveTransitionSampleSize,
simResults$effectiveTransitionSampleSize)
I0 = simResults$I0
E0 = I0*0
S0 = simResults$N[1,] - I0 - E0
InitContainer = buildInitialValueContainer(simResults$I_star, simResults$N,
S0 = S0, I0 = I0, E0 = E0, reinfection=FALSE, dataType = "I_star")
res = buildSEIRModel(outFileName,DataModel,ExposureModel,ReinfectionModel,DistanceModel,TransitionPriors,
InitContainer,SamplingControl)
res$setRandomSeed(seed)
